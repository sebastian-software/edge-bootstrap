#!/usr/bin/env node
/* eslint-disable */

const path = require("path")
const tar = require("tar")

console.log("prepack node script")

const CWD = process.cwd()
const TEMPLATE_PATH = path.join(CWD, "template.tar")
const EDGE_BOILERPLATE_PATH = path.join(CWD, "..", "edge-boilerplate")

tar
  .create(
    {
      file: TEMPLATE_PATH,
      cwd: EDGE_BOILERPLATE_PATH,
      follow: true
    },
    ["."]
  )
  .then(() => {
    console.log("template.tar created")
    process.exit(0)
  })
  .catch((error) => {
    console.error(error.stack)
    process.exit(1)
  })
